[Unit]
Description=docker compose of all usenet services
Requires=data.mount
After=data.mount

[Service]
Restart=on-failure
WorkingDirectory=/drive/gce-usenet

ExecStartPre=-/bin/git pull
ExecStartPre=-/opt/bin/docker-compose pull
ExecStartPre=-/opt/bin/docker-compose build
ExecStart=-/opt/bin/docker-compose up
ExecStop=-/opt/bin/docker-compose down

[Install]
WantedBy=multi-user.target
